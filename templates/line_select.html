{% extends "layout.html" %} 
{% block body %}
<script type="text/javascript" charset="utf-8">
function load_list() {
    alert('!');
    var station = $("#line_select").val();

    // send value via GET to URL /<department_id>
    $.ajax({
      type: 'GET',
      url: "{{url_for('line_select')}}",
      data: {
          station : station
      },
      success: (function(data){
          console.log('sucess')
          console.log(station)
      }),
      error: (function(error) {
                  console.log(error);
        })
    });
};
function calculate() {
          $.ajax({
              type: 'POST',
              url:"{{ url_for('calculate') }}",
              data: {
                  station_1 : $("#station_select_1").val(),
                  station_2: $("#station_select_2").val(),
              },
              success: function(data) {
                document.getElementById("status").innerHTML = data;
              },
              error: function(error){
                  console.log(error)
              }
          });
};
</script>
<div id=selection_form>
     <select id='line_select' name='line' onchange="load_list()">
            {% for line in lines %}
            {% if line == selected_line %}
                <option selected value="{{ line }}">{{ line }}</option> 
            {% else %} 
                <option value="{{ line }}">{{ line }}</option> 
            {% endif %}
           {% endfor %}
     </select>
     <select id='station_select_1' name='station'>
        {% for station in stations %}
            <option value="{{ station }}">{{ station }}</option> 
        {% endfor %}
    </select>
    <select id='station_select_2' name='station'>
        {% for station in stations %}
            <option value="{{ station }}">{{ station }}</option> 
        {% endfor %}
    </select>
    <div id='controls'>
        <button class="btn btn-default" type='submit'  onclick="calculate()">Go</button>
    </div>
</div>
<p id='status'></p>

{% endblock %}